if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}const n=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n};const r=n({name:"uniLink",props:{href:{type:String,default:""},text:{type:String,default:""},download:{type:String,default:""},showUnderLine:{type:[Boolean,String],default:!0},copyTips:{type:String,default:"已自动复制网址，请在手机浏览器里粘贴该网址"},color:{type:String,default:"#999999"},fontSize:{type:[Number,String],default:14}},computed:{isShowA(){return!(!this.isMail()&&!this.isTel()||!0!==this._isH5)}},created(){this._isH5=null},methods:{isMail(){return this.href.startsWith("mailto:")},isTel(){return this.href.startsWith("tel:")},openURL(){this.isTel()?this.makePhoneCall(this.href.replace("tel:","")):plus.runtime.openURL(this.href)},makePhoneCall(e){uni.makePhoneCall({phoneNumber:e})}}},[["render",function(t,n,r,o,i,a){return a.isShowA?(e.openBlock(),e.createElementBlock("a",{key:0,class:e.normalizeClass(["uni-link",{"uni-link--withline":!0===r.showUnderLine||"true"===r.showUnderLine}]),href:r.href,style:e.normalizeStyle({color:r.color,fontSize:r.fontSize+"px"}),download:r.download},[e.renderSlot(t.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(r.text),1)]),!0)],14,["href","download"])):(e.openBlock(),e.createElementBlock("text",{key:1,class:e.normalizeClass(["uni-link",{"uni-link--withline":!0===r.showUnderLine||"true"===r.showUnderLine}]),style:e.normalizeStyle({color:r.color,fontSize:r.fontSize+"px"}),onClick:n[0]||(n[0]=(...e)=>a.openURL&&a.openURL(...e))},[e.renderSlot(t.$slots,"default",{},(()=>[e.createTextVNode(e.toDisplayString(r.text),1)]),!0)],6))}],["__scopeId","data-v-c0949d4e"]]),o={url:"",method:"GET",timeout:1e4,loading:!0};const i=new class{constructor(e){this.baseURL=e.baseURL,this.interceptor={}}setInterceptor(e){this.interceptor=e}async request(e){let t={...o,...e};"function"==typeof this.interceptor.request&&(t=this.interceptor.request(t));let n=this.baseURL+t.url;if(t.params){n+=`?${new URLSearchParams(t.params).toString()}`}t.loading&&uni.showLoading({title:"加载中...",mask:!0});try{const e=await uni.request({url:n,method:t.method,data:t.data,header:t.header,timeout:t.timeout});let r=e;return"function"==typeof this.interceptor.response&&(r=this.interceptor.response(e)),200===r.statusCode?r.data:Promise.reject(r.data)}catch(r){return this.handleError(r),Promise.reject(r)}finally{t.loading&&uni.hideLoading()}}handleError(e){const n=e.errMsg||"";n.includes("timeout")?uni.showToast({title:"请求超时",icon:"none"}):n.includes("abort")?t("log","at utils/request/http.js:83","请求被取消"):uni.showToast({title:"网络异常，请稍后重试",icon:"none"})}get(e,t,n){return this.request({...n,url:e,method:"GET",params:t})}post(e,t,n){return this.request({...n,url:e,method:"POST",data:t})}put(e,t,n){return this.request({...n,url:e,method:"PUT",data:t})}delete(e,t,n){return this.request({...n,url:e,method:"DELETE",params:t})}}({baseURL:"https://k1sw.wiselink.net.cn"});i.setInterceptor({request:e=>{const t=uni.getStorageSync("token");return t&&(e.header={...e.header,Authorization:`Bearer ${t}`}),e},response:e=>(401===e.data.code&&uni.navigateTo({url:"/pages/login/login"}),e)});const a=e=>i.get("/deskapi/navlist",e);const s=n({data:()=>({href:"https://k1sw.wiselink.net.cn/deskapi/navlist",products:[]}),methods:{async loadProducts(){uni.showToast({title:"111222222"});const e=await a({page:1,pageSize:10});uni.showToast({title:e.code||"111"});try{const e=await a({page:1,pageSize:10});this.products=e.content,uni.showToast({title:e.code})}catch(n){t("error","at pages/index/index.vue:39","获取商品失败",n)}},handleNavigateToTargetPage(){uni.navigateTo({url:"/pages/login/login"})}},onLoad(){},onShow(){this.loadProducts()}},[["render",function(t,n,o,i,a,s){const l=(u=e.resolveDynamicComponent("uni-link"),c=r,"string"==typeof u?c:u);var u,c;return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"intro"},"本项目已包含uni ui组件，无需import和注册，可直接使用。在代码区键入字母u，即可通过代码助手列出所有可用组件。光标置于组件名称处按F1，即可查看组件文档。"),e.createElementVNode("text",{class:"intro"},"详见："),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.products,((t,n)=>(e.openBlock(),e.createElementBlock("view",null,"1")))),256)),e.createVNode(l,{href:a.href,text:a.href},null,8,["href","text"]),e.createElementVNode("view",{onClick:n[0]||(n[0]=e.withModifiers(((...e)=>s.handleNavigateToTargetPage&&s.handleNavigateToTargetPage(...e)),["stop"]))},"去登录")])}]]);const l=n({data:()=>({username:"",password:""}),methods:{async handleLogin(){var e;if(this.username&&this.password)try{const t=await(e={username:"admin",password:"123456"},i.post("/login",e));uni.setStorageSync("token",t.token)}catch(n){t("error","at pages/login/login.vue:51","登录失败",n)}else uni.showToast({title:"请输入用户名和密码",icon:"none"})},handleRegister(){uni.navigateTo({url:"/pages/register/register"})}}},[["render",function(t,n,r,o,i,a){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"title"},"登录"),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>i.username=e),placeholder:"请输入年龄"},null,512),[[e.vModelText,i.username]]),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=e=>i.password=e),placeholder:"请输入年龄"},null,512),[[e.vModelText,i.password]]),e.createElementVNode("button",{class:"login-btn",onClick:n[2]||(n[2]=(...e)=>a.handleLogin&&a.handleLogin(...e))},"登录"),e.createElementVNode("view",{class:"register-link"},[e.createElementVNode("text",null,"还没有账号？"),e.createElementVNode("text",{class:"link",onClick:n[3]||(n[3]=(...e)=>a.handleRegister&&a.handleRegister(...e))},"立即注册")])])}],["__scopeId","data-v-d55edbbe"]]);const u=n({},[["render",function(e,t){return null}]]);__definePage("pages/index/index",s),__definePage("pages/login/login",l),__definePage("pages/register/register",u);const c={onLaunch:function(){t("warn","at App.vue:4","当前组件仅支持 uni_modules 目录结构 ，请升级 HBuilderX 到 3.1.0 版本以上！"),t("log","at App.vue:5","App Launch")},onShow:function(){t("log","at App.vue:8","App Show")},onHide:function(){t("log","at App.vue:11","App Hide")}};const{app:d,Vuex:p,Pinia:h}={app:e.createVueApp(c)};uni.Vuex=p,uni.Pinia=h,d.provide("__globalStyles",__uniConfig.styles),d._component.mpType="app",d._component.render=()=>{},d.mount("#app")}(Vue);
